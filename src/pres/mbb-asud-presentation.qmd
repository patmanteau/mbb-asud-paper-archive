---
title: "Erschließung eines Netzwerks von Named Entities aus Nachrichtenartikeln am Beispiel von www.tagesschau.de"
subtitle: "Analyse semi- und unstrukturierter Daten -- MBB WS22 (K)"
lang: de-DE
date: 2023-07-12
date-format: full
format:
  revealjs: 
    theme: clean-archivo-narrow.scss
    pointer:
      pointerSize: 24
author:
  - name: Patrick Haas -- 311431
    email: p@trickhaas.de
revealjs-plugins:
  - pointer
  - attribution
---

# Motivation und Inspiration

## {background-image="assets/typen_von_graphen.png" background-size="100%"}

::: {.notes}
- möchte was über Graphen erzählen, meine heute aber leider nicht flauschige Blutsauger
- stark vernetzte Welt
- Netzwerkdarstellung bietet Perspektive, die von großem Wert für das Verständnis
- Strukturen, Zusammenhänge, Flüsse
- Gute Visualisierung eines Graphen ist sehr herausfordernd
- und da brenne ich ja für
- *weiter*
:::

---------------

:::: {.columns}

::: {.column width="50%"}
![](assets/sonar_einstieg.png){height=50%}

*SoNAR (IDH)*: Interfaces to Data for Social Historical Network Analysis and Research
:::

::: {.column width="50%"}
![](assets/15.jpg)
:::

::::

::: {.notes}
- gewisse Faszination meinerseits
- Gespräch über Graph in Vorlesung
- Ich: warum kein Graph?
- SoNAR (IDH): Historische Netzwerkanalyse
  - Scans historischer Dokumente, OCR
  - Visualisierung
  - sehr sehr faszinierend
- Ok, mach ich auch - aber mit Nachrichten
:::

##

::: {layout-ncol=3 layout-valign="center" .centered}
![](assets/tagesschau.de-archiv.png)

[{{< bi patch-question >}}]{.fragment .xlarger fragment-index=2}

![](assets/newsgraph.svg){.fragment fragment-index=1}
:::

::: {.notes}
- Idee: Netzwerk aus Nachrichtenartikeln bauen
- **klick**
- Personen, Orte, Organisationen verbinden
- die gemeinsam in einem Artikel erwähnt werden
- um sie mit den Mitteln der Netzwerkanalyse auswerten (Kennzahlen, Eigenschaften, Communities)
- **klick**

Frage: wie kommt man von A nach B?
:::

# Konzept

## {auto-animate="true"}

:::: {layout-ncol=2 layout-valign="center"}

::: {}
»[...] Die Verurteilung von [Starkoch Alfons Schuhbeck]{.bg style="--col: #FFAABB" data-id="schuhbeck1"} wegen [Steuerhinterziehung]{.bg style="--col: #BBCC33"} ist nach einem [Urteil]{.bg style="--col: #AAAA00"} des [Bundesgerichtshofs]{.bg style="--col: #44BB99"} weitgehend rechtskräftig. Im Oktober 2022 hatte das [Landgericht München I]{.bg style="--col: #77AADD"} [Schuhbeck]{.bg style="--col: #99DDFF" data-id="schuhbeck2"} zu drei Jahren und zwei Monaten [Gefängnis]{.bg style="--col: #EEDD88"} verurteilt [...].«
:::

::: {.fragment .centered}
**Named Entity Recognition**
:::
::::

::: {.notes}
- Ausgangspunkt: ein Artikel
- **klick**
- Named Entity Recognition durchgeführt habe
- *zeigen* Problem: "Starkoch Alfons Schuhbeck", "Schuhbeck" -- separate Entitäten, aber die gleiche Person ist gemeint
- Nicht gut - ich will konkrete Personen...
:::

## {auto-animate="true"}

:::: {layout-ncol=2 layout-valign="center"}

::: {}
»[...] Die Verurteilung von [Starkoch Alfons Schuhbeck]{.bg style="--col: #EE8866" data-id="schuhbeck1"} wegen [Steuerhinterziehung]{.bg style="--col: #BBCC33"} ist nach einem [Urteil]{.bg style="--col: #AAAA00"} des [Bundesgerichtshofs]{.bg style="--col: #44BB99"} weitgehend rechtskräftig. Im Oktober 2022 hatte das [Landgericht München I]{.bg style="--col: #77AADD"} [Schuhbeck]{.bg style="--col: #EE8866" data-id="schuhbeck2"} zu drei Jahren und zwei Monaten [Gefängnis]{.bg style="--col: #EEDD88"} verurteilt [...].«
:::

::: {.fragment .centered}
**Named Entity Disambiguation**
:::
::::

::: {.notes}
- muss also nächsten Schritt Entitäten eindeutig machen
- **klick**
- Named Entity Disambiguation
- *zeigen*: Schuhbeck Schuhbeck
- Aber es geht um mehr als einzelnen Artikel...
:::


## {auto-animate=true}

:::: {.columns .fragment fragment-index=2 .semi-fade-out}

::: {.column width="50%"}
»[...] Die Verurteilung von [Starkoch Alfons Schuhbeck]{.bg style="--col: #EE8866" data-id="wikify-1"} wegen [Steuerhinterziehung]{.bg style="--col: #BBCC33" data-id="wikify-2"} ist nach einem [Urteil]{.bg style="--col: #AAAA00" data-id="wikify-3"} des [Bundesgerichtshofs]{.bg style="--col: #44BB99" data-id="wikify-4"} weitgehend rechtskräftig. Im Oktober 2022 hatte das [Landgericht München I]{.bg style="--col: #77AADD" data-id="wikify-5"} [Schuhbeck]{.bg style="--col: #EE8866" data-id="wikify-6"} zu drei Jahren und zwei Monaten [Gefängnis]{.bg style="--col: #EEDD88" data-id="wikify-7"} verurteilt [...].«
:::

::: {.column width="50%" .fragment fragment-index=1}
»[...] Drei Jahre und zwei Monate [Haft]{.bg style="--col: #EEDD88" data-id="wikify-8"} ohne Bewährung wegen [Steuerhinterziehung]{.bg style="--col: #BBCC33" data-id="wikify-9"} - so lautete in der vergangenen Woche das [Urteil]{.bg style="--col: #AAAA00" data-id="wikify-10"} gegen den bekannten [Fernsehkoch Alfons Schuhbeck]{.bg style="--col: #EE8866" data-id="wikify-11"}. [Schubeck]{.bg style="--col: #EE8866" data-id="wikify-12"} will nun [Revision]{.bg style="--col: #FFAABB" data-id="wikify-13"} einlegen [...].«
:::
::::

::: {.fragment fragment-index=3 .centered}
**Entity Linking** [anhand einer Wissensbasis -- hier per *Wikidata* (Wikifizierung).]{.fg style="--col: #7f7f7f"}
:::


::: {.notes}
- **klick**
- ...ich habe jede Menge!
- Eindeutig machen auch zwischen den Artikeln
- Schwierig! *zeigen*: Schuhbeck (Typo) & Haft/Gefängnis
- Die gemeinte Entität hängt vom Kontext ab
- **klick** **klick**
- Das Verfahren, das ich brauche: Entity Linking - Referenzieren in eine Wissensbasis, gerne Wikidata
- **klick**
:::


## {auto-animate=true}

:::: {.columns .semi-fade-out}

::: {.column width="50%"}
»[...] Die Verurteilung von [Q45443]{.bg style="--col: #EE8866" data-id="wikify-1"} wegen [Q17354131]{.bg style="--col: #BBCC33" data-id="wikify-2"} ist nach einem [Q3769186]{.bg style="--col: #AAAA00" data-id="wikify-3"} des [Q687323]{.bg style="--col: #44BB99" data-id="wikify-4"} weitgehend rechtskräftig. Im Oktober 2022 hatte das [Q1802882]{.bg style="--col: #77AADD" data-id="wikify-5"} [Q45443]{.bg style="--col: #EE8866" data-id="wikify-6"} zu drei Jahren und zwei Monaten [Q841236]{.bg style="--col: #EEDD88" data-id="wikify-7"} verurteilt [...].«
:::

::: {.column width="50%"}
»[...] Drei Jahre und zwei Monate [Q841236]{.bg style="--col: #EEDD88" data-id="wikify-8"} ohne Bewährung wegen [Q17354131]{.bg style="--col: #BBCC33" data-id="wikify-9"} - so lautete in der vergangenen Woche das [Q3769186]{.bg style="--col: #AAAA00" data-id="wikify-10"} gegen den bekannten [Q45443]{.bg style="--col: #EE8866" data-id="wikify-11"}. [Q45443]{.bg style="--col: #EE8866" data-id="wikify-12"} will nun [Q1523791]{.bg style="--col: #FFAABB" data-id="wikify-13"} einlegen [...].«
:::
::::

::: {.centered}
Entity **Recognition** + Entity **Disambiguation** + **Referenzierung** in eine Wissensbasis = End-to-end Entity Linking
:::

::: {.notes}
- Habe konzeptionell damit alles, was ich brauche
- *Gleichung wiedergeben*
- Knoten
- Kanten
- **klick**
:::

## {auto-animate=true}

:::: {.columns .semi-fade-out}

::: {.column width="50%"}
»[...] Die Verurteilung von [Q45443]{.bg style="--col: #EE8866" data-id="wikify-1"} wegen [Q17354131]{.bg style="--col: #BBCC33" data-id="wikify-2"} ist nach einem [Q3769186]{.bg style="--col: #AAAA00" data-id="wikify-3"} des [Q687323]{.bg style="--col: #44BB99" data-id="wikify-4"} weitgehend rechtskräftig. Im Oktober 2022 hatte das [Q1802882]{.bg style="--col: #77AADD" data-id="wikify-5"} [Q45443]{.bg style="--col: #EE8866" data-id="wikify-6"} zu drei Jahren und zwei Monaten [Q841236]{.bg style="--col: #EEDD88" data-id="wikify-7"} verurteilt [...].«
:::

::: {.column width="50%"}
»[...] Drei Jahre und zwei Monate [Q841236]{.bg style="--col: #EEDD88" data-id="wikify-8"} ohne Bewährung wegen [Q17354131]{.bg style="--col: #BBCC33" data-id="wikify-9"} - so lautete in der vergangenen Woche das [Q3769186]{.bg style="--col: #AAAA00" data-id="wikify-10"} gegen den bekannten [Q45443]{.bg style="--col: #EE8866" data-id="wikify-11"}. [Q45443]{.bg style="--col: #EE8866" data-id="wikify-12"} will nun [Q1523791]{.bg style="--col: #FFAABB" data-id="wikify-13"} einlegen [...].«
:::
::::

::: {.centered}
![](assets/entities.svg){width=40%}
:::

::: {.notes}
- Graph für diese beiden Artikel
:::

# Daten-Pipeline

::: {.notes}
- Wir wollen mehr als zwei Artikel
- Wir brauchen eine Architektur für viele Artikel
- Wie kann das aussehen?...
:::


## {background-image="assets/pipeline.png" background-size="100%"}

::: {.notes}
- Am Anfang Dok-korpus -- Tagesschau und Wikidata
- Am Ende Datenkorpus -- Ausgangspunkt für weitere Analyse
- Dazwischen eine vierstufige Pipeline
- (weitgehend) modular
- jede Stufe Zwischenergebnis, wiederaufsetzbar
II.
  - *entity-fishing* -- E2E EL Lösung, Webservice, per Plugin in spaCy integriert
IV.
  - Nicht bzw. niedrig bewertete Entitäten ausfiltern
:::

## Technischer Durchstich

:::: {layout-ncol=2 layout-valign="center"}

::: {.column width="50%"}
![](assets/neo4j.png)
![](assets/degree_distribution.png)
:::

::: {.column width="50%"}
![](assets/cosmograph_example.png)
:::

::::

::: {.notes}
- die Pipeline funktioniert
- die Ergebnisse sehen plausibel aus
- die Analyse kann kommen
:::


# Herausforderungen

## Entity Linking

1. Named Entity Recognition
2. Rückgriff auf eine Wissensbasis
3. Kandidatenauswahl
4. Bewertung anhand des lokalen Kontexts

::: {.callout-note}
## Starker Bezug zur gesprochenen Sprache

Deutsche Modelle existieren, aber die aktuelle Forschung konzentriert sich auf das Englische
:::

::: {.notes}
- Recap 4 Punkte
- sprachspezifisch
- **Herausforderung**: gutes deutsches Modell finden
:::


## Betrachtete Optionen

:::: {layout-ncol=2}

::: {.column width="50%" .fragment}
### REL: Radboud Entity Linker

Kein deutsches Modell

Trainierbar, aber: deutsche Trainings-/Test-/Validierungsdaten erforderlich

Daher für diese Arbeit [verworfen]{.alert}
:::

::: {.column width="50%" .fragment}
### *entity-fishing*
Deutsches Modell

Mit Standardinstallation niedriger Durchsatz -- ca. 40 Artikel/min.

{{< bi hourglass-bottom >}} **10 Stunden** für 25.000 Artikel
:::

::::

::: {.notes}
- **klick**
- REL hätte ich sehr gerne genommen
- verwerfen war schade -- sehr interessantes, gut dokumentiertes Modell
- **klick**
- Kann Deutsch
- Laufzeit war Herausforderung...
- *weiter*
:::

## Durchsatzoptimierung

:::: {layout-ncol=2}

::: {.column width="50%" .fragment}
Lokale Installation des *entity-fishing*-Webservice

Deployment als Docker-Container

Wissensbasis + englisches + deutsches Modell = ~60 GiB
:::

::: {.column width="50%" .fragment}
Entity Linking ist unabhängig von anderen Artikeln

Wissenbasis und Modelle passen vollständig ins RAM der Workstation

Gut parallelisierbares Problem!
:::

::::

:::: {.fragment .centered}
{{< bi hourglass-split >}} **33 Minuten** für 25.000 Artikel
::::

::: {.notes}
- **klick**
:::

# Ausblick

##

:::: {layout-ncol=2}

::: {.column width="50%"}
**Netzwerkanalyse**: Gradverteilung -- Assortativität -- Zentralität -- usf.

**Vergleich von Netzwerken**: Weitere Nachrichtenportale -- deutsch, englisch, französisch, ...

**Quantifizierung der EL-Fehlerquote**: Auf dem Realdatensatz schwer bewertbar -- ggfs. durch Vergleich mehrerer EL-Modelle
:::

::: {.column width="50%" .fragment}
**Besseres Entity Linking** -- deutsches Training/Finetuning anderer EL-Systeme:

- [Radboud Entity Linker](https://github.com/informagi/REL)
- [SBB-NED](https://github.com/qurator-spk/sbb_ned)
- [REBEL](https://github.com/Babelscape/rebel)
- [GENRE/mGENRE](https://github.com/facebookresearch/GENRE)
:::

::::

::: {.notes}
- Netzwerkanalyse: Struktur, Zentralität, Communities
- Vergleich mehrerer Netzwerke
- EL ist fehleranfällig - ein qualifizierter Vergleich ohne Label wäre interessant
- Entsprechend weitere EL-Systeme
:::

# Vielen Dank! {{< bi moon-stars-fill color=#FEC44F >}}